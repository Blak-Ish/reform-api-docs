{"swagger":"2.0","info":{"description":"Documented API for the interim document management solution.To use the API calls generate an Authorization JWT Tokens (user and service) which is required in the header.","version":"1.2.0","title":"Document Management API"},"host":"localhost:4603","basePath":"/","tags":[{"name":"document-content-version-controller","description":"Document Content Version Controller"},{"name":"stored-document-update-controller","description":"Stored Document Update Controller"},{"name":"stored-document-controller","description":"Stored Document Controller"},{"name":"stored-document-audit-controller","description":"Stored Document Audit Controller"},{"name":"stored-document-search-controller","description":"Stored Document Search Controller"},{"name":"stored-document-delete-controller","description":"Stored Document Delete Controller"},{"name":"document-thumbnail-controller","description":"Document Thumbnail Controller"},{"name":"blob-storage-migration-controller","description":"Blob Storage Migration Controller"}],"paths":{"/documents":{"post":{"tags":["stored-document-controller"],"summary":"Creates a list of Stored Documents by uploading a list of binary/text files.","operationId":"createFromUsingPOST","consumes":["multipart/form-data"],"produces":["*/*"],"parameters":[{"name":"ServiceAuthorization","in":"header","description":"Service Auth (S2S). Use it when accessing the API on App Tier level.","required":true,"type":"string"},{"name":"user-id","in":"header","description":"User-id of the currently authenticated user. If provided will be used to populate the creator field of a document and will be used for authorisation.","required":false,"type":"string"},{"name":"user-roles","in":"header","description":"Comma-separated list of roles of the currently authenticated user. If provided will be used for authorisation.","required":false,"type":"string"},{"name":"files","in":"query","required":false,"type":"array","items":{"type":"file"},"collectionFormat":"multi"},{"name":"roles","in":"query","required":false,"type":"array","items":{"type":"string"},"collectionFormat":"multi"},{"name":"classification","in":"query","required":false,"type":"string","enum":["PUBLIC","PRIVATE","RESTRICTED"]},{"name":"ttl","in":"query","required":false,"type":"string","format":"date-time"}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/StoredDocumentHalResourceCollection"}},"201":{"description":"Created"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}}},"/documents/filter":{"post":{"tags":["stored-document-search-controller"],"summary":"Search stored documents using metadata.","operationId":"searchUsingPOST","consumes":["application/json"],"produces":["*/*"],"parameters":[{"name":"ServiceAuthorization","in":"header","description":"Service Auth (S2S). Use it when accessing the API on App Tier level.","required":true,"type":"string"},{"name":"user-id","in":"header","description":"User-id of the currently authenticated user. If provided will be used to populate the creator field of a document and will be used for authorisation.","required":false,"type":"string"},{"name":"user-roles","in":"header","description":"Comma-separated list of roles of the currently authenticated user. If provided will be used for authorisation.","required":false,"type":"string"},{"in":"body","name":"metadataSearchCommand","description":"metadataSearchCommand","required":true,"schema":{"$ref":"#/definitions/MetadataSearchCommand"}}],"responses":{"200":{"description":"Returns search results","schema":{"$ref":"#/definitions/StoredDocumentHalResourceCollection"}},"201":{"description":"Created"},"400":{"description":"Error when search criteria not specified"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}}},"/documents/owned":{"post":{"tags":["stored-document-search-controller"],"summary":"Search stored documents by ownership.","operationId":"searchOwnedUsingPOST","consumes":["application/json"],"produces":["*/*"],"parameters":[{"name":"ServiceAuthorization","in":"header","description":"Service Auth (S2S). Use it when accessing the API on App Tier level.","required":true,"type":"string"},{"name":"user-id","in":"header","description":"User-id of the currently authenticated user. If provided will be used to populate the creator field of a document and will be used for authorisation.","required":false,"type":"string"},{"name":"user-roles","in":"header","description":"Comma-separated list of roles of the currently authenticated user. If provided will be used for authorisation.","required":false,"type":"string"}],"responses":{"200":{"description":"Returns search results","schema":{"$ref":"#/definitions/StoredDocumentHalResourceCollection"}},"201":{"description":"Created"},"400":{"description":"Error when search criteria not specified"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}}},"/documents/{documentId}":{"get":{"tags":["stored-document-controller"],"summary":"Retrieves JSON representation of a Stored Document.","operationId":"getMetaDataUsingGET","consumes":["application/json"],"produces":["*/*"],"parameters":[{"name":"ServiceAuthorization","in":"header","description":"Service Auth (S2S). Use it when accessing the API on App Tier level.","required":true,"type":"string"},{"name":"user-id","in":"header","description":"User-id of the currently authenticated user. If provided will be used to populate the creator field of a document and will be used for authorisation.","required":false,"type":"string"},{"name":"user-roles","in":"header","description":"Comma-separated list of roles of the currently authenticated user. If provided will be used for authorisation.","required":false,"type":"string"},{"name":"documentId","in":"path","description":"documentId","required":true,"type":"string"}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/StoredDocumentHalResource"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}},"post":{"tags":["document-content-version-controller"],"summary":"Adds a Document Content Version and associates it with a given Stored Document.","operationId":"addDocumentContentVersionForVersionsMappingNotPresentUsingPOST","consumes":["multipart/form-data"],"produces":["*/*"],"parameters":[{"name":"ServiceAuthorization","in":"header","description":"Service Auth (S2S). Use it when accessing the API on App Tier level.","required":true,"type":"string"},{"name":"user-id","in":"header","description":"User-id of the currently authenticated user. If provided will be used to populate the creator field of a document and will be used for authorisation.","required":false,"type":"string"},{"name":"user-roles","in":"header","description":"Comma-separated list of roles of the currently authenticated user. If provided will be used for authorisation.","required":false,"type":"string"},{"name":"documentId","in":"path","description":"documentId","required":true,"type":"string"},{"name":"file","in":"query","required":false,"type":"file"}],"responses":{"200":{"description":"OK","schema":{"type":"object"}},"201":{"description":"JSON representation of a document version","schema":{"$ref":"#/definitions/DocumentContentVersionHalResource"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}},"delete":{"tags":["stored-document-delete-controller"],"summary":"Deletes a Stored Document.","operationId":"deleteDocumentUsingDELETE","consumes":["application/json"],"produces":["*/*"],"parameters":[{"name":"ServiceAuthorization","in":"header","description":"Service Auth (S2S). Use it when accessing the API on App Tier level.","required":true,"type":"string"},{"name":"user-id","in":"header","description":"User-id of the currently authenticated user. If provided will be used to populate the creator field of a document and will be used for authorisation.","required":false,"type":"string"},{"name":"user-roles","in":"header","description":"Comma-separated list of roles of the currently authenticated user. If provided will be used for authorisation.","required":false,"type":"string"},{"name":"documentId","in":"path","description":"documentId","required":true,"type":"string"},{"name":"permanent","in":"query","description":"permanent","required":false,"type":"boolean","default":false}],"responses":{"200":{"description":"OK","schema":{"type":"object"}},"204":{"description":"No Content returned","schema":{"type":"object"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"}}},"patch":{"tags":["stored-document-update-controller"],"summary":"Updates document instance (ex. ttl)","operationId":"updateDocumentUsingPATCH","consumes":["application/json"],"produces":["*/*"],"parameters":[{"name":"ServiceAuthorization","in":"header","description":"Service Auth (S2S). Use it when accessing the API on App Tier level.","required":true,"type":"string"},{"name":"user-id","in":"header","description":"User-id of the currently authenticated user. If provided will be used to populate the creator field of a document and will be used for authorisation.","required":false,"type":"string"},{"name":"user-roles","in":"header","description":"Comma-separated list of roles of the currently authenticated user. If provided will be used for authorisation.","required":false,"type":"string"},{"name":"documentId","in":"path","description":"documentId","required":true,"type":"string"},{"in":"body","name":"updateDocumentCommand","description":"updateDocumentCommand","required":true,"schema":{"$ref":"#/definitions/UpdateDocumentCommand"}}],"responses":{"200":{"description":"Returns representation of the new state","schema":{"$ref":"#/definitions/StoredDocumentHalResource"}},"204":{"description":"No Content"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"}}}},"/documents/{documentId}/auditEntries":{"get":{"tags":["stored-document-audit-controller"],"summary":"Retrieves audits related to a Stored Document.","operationId":"findAuditsUsingGET","consumes":["application/json"],"produces":["*/*"],"parameters":[{"name":"ServiceAuthorization","in":"header","description":"Service Auth (S2S). Use it when accessing the API on App Tier level.","required":true,"type":"string"},{"name":"user-id","in":"header","description":"User-id of the currently authenticated user. If provided will be used to populate the creator field of a document and will be used for authorisation.","required":false,"type":"string"},{"name":"user-roles","in":"header","description":"Comma-separated list of roles of the currently authenticated user. If provided will be used for authorisation.","required":false,"type":"string"},{"name":"documentId","in":"path","description":"documentId","required":true,"type":"string"}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/StoredDocumentAuditEntryHalResource"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}}},"/documents/{documentId}/binary":{"get":{"tags":["stored-document-controller"],"summary":"Streams contents of the most recent Document Content Version associated with the Stored Document.","operationId":"getBinaryUsingGET","consumes":["application/json"],"produces":["*/*"],"parameters":[{"name":"ServiceAuthorization","in":"header","description":"Service Auth (S2S). Use it when accessing the API on App Tier level.","required":true,"type":"string"},{"name":"user-id","in":"header","description":"User-id of the currently authenticated user. If provided will be used to populate the creator field of a document and will be used for authorisation.","required":false,"type":"string"},{"name":"user-roles","in":"header","description":"Comma-separated list of roles of the currently authenticated user. If provided will be used for authorisation.","required":false,"type":"string"},{"name":"documentId","in":"path","description":"documentId","required":true,"type":"string"}],"responses":{"200":{"description":"Returns contents of a file","schema":{"type":"object"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}}},"/documents/{documentId}/thumbnail":{"get":{"tags":["document-thumbnail-controller"],"summary":"Streams contents of the most recent Document Content Version associated with the Stored Document.","operationId":"getPreviewThumbnailUsingGET","consumes":["application/json"],"produces":["*/*"],"parameters":[{"name":"ServiceAuthorization","in":"header","description":"Service Auth (S2S). Use it when accessing the API on App Tier level.","required":true,"type":"string"},{"name":"user-id","in":"header","description":"User-id of the currently authenticated user. If provided will be used to populate the creator field of a document and will be used for authorisation.","required":false,"type":"string"},{"name":"user-roles","in":"header","description":"Comma-separated list of roles of the currently authenticated user. If provided will be used for authorisation.","required":false,"type":"string"},{"name":"documentId","in":"path","description":"documentId","required":true,"type":"string"}],"responses":{"200":{"description":"Returns thumbnail of a file","schema":{"$ref":"#/definitions/Resource"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}}},"/documents/{documentId}/versions":{"post":{"tags":["document-content-version-controller"],"summary":"Adds a Document Content Version and associates it with a given Stored Document.","operationId":"addDocumentContentVersionUsingPOST","consumes":["multipart/form-data"],"produces":["*/*"],"parameters":[{"name":"ServiceAuthorization","in":"header","description":"Service Auth (S2S). Use it when accessing the API on App Tier level.","required":true,"type":"string"},{"name":"user-id","in":"header","description":"User-id of the currently authenticated user. If provided will be used to populate the creator field of a document and will be used for authorisation.","required":false,"type":"string"},{"name":"user-roles","in":"header","description":"Comma-separated list of roles of the currently authenticated user. If provided will be used for authorisation.","required":false,"type":"string"},{"name":"documentId","in":"path","description":"documentId","required":true,"type":"string"},{"name":"file","in":"query","required":false,"type":"file"}],"responses":{"200":{"description":"OK","schema":{"type":"object"}},"201":{"description":"JSON representation of a document version","schema":{"$ref":"#/definitions/DocumentContentVersionHalResource"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}}},"/documents/{documentId}/versions/{versionId}":{"get":{"tags":["document-content-version-controller"],"summary":"Returns a specific version of the content of a Stored Document.","operationId":"getDocumentContentVersionDocumentUsingGET","consumes":["application/json"],"produces":["*/*"],"parameters":[{"name":"ServiceAuthorization","in":"header","description":"Service Auth (S2S). Use it when accessing the API on App Tier level.","required":true,"type":"string"},{"name":"user-id","in":"header","description":"User-id of the currently authenticated user. If provided will be used to populate the creator field of a document and will be used for authorisation.","required":false,"type":"string"},{"name":"user-roles","in":"header","description":"Comma-separated list of roles of the currently authenticated user. If provided will be used for authorisation.","required":false,"type":"string"},{"name":"documentId","in":"path","description":"documentId","required":true,"type":"string"},{"name":"versionId","in":"path","description":"versionId","required":true,"type":"string"}],"responses":{"200":{"description":"JSON representation of a document version","schema":{"$ref":"#/definitions/DocumentContentVersionHalResource"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}}},"/documents/{documentId}/versions/{versionId}/binary":{"get":{"tags":["document-content-version-controller"],"summary":"Streams a specific version of the content of a Stored Document.","operationId":"getDocumentContentVersionDocumentBinaryUsingGET","consumes":["application/json"],"produces":["*/*"],"parameters":[{"name":"ServiceAuthorization","in":"header","description":"Service Auth (S2S). Use it when accessing the API on App Tier level.","required":true,"type":"string"},{"name":"user-id","in":"header","description":"User-id of the currently authenticated user. If provided will be used to populate the creator field of a document and will be used for authorisation.","required":false,"type":"string"},{"name":"user-roles","in":"header","description":"Comma-separated list of roles of the currently authenticated user. If provided will be used for authorisation.","required":false,"type":"string"},{"name":"documentId","in":"path","description":"documentId","required":true,"type":"string"},{"name":"versionId","in":"path","description":"versionId","required":true,"type":"string"}],"responses":{"200":{"description":"Returns contents of a document version","schema":{"type":"object"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}}},"/documents/{documentId}/versions/{versionId}/migrate":{"post":{"tags":["blob-storage-migration-controller"],"summary":"Starts migration for a specific version of the content of a Stored Document.","operationId":"migrateDocumentUsingPOST","consumes":["application/json"],"produces":["*/*"],"parameters":[{"name":"ServiceAuthorization","in":"header","description":"Service Auth (S2S). Use it when accessing the API on App Tier level.","required":true,"type":"string"},{"name":"user-id","in":"header","description":"User-id of the currently authenticated user. If provided will be used to populate the creator field of a document and will be used for authorisation.","required":false,"type":"string"},{"name":"user-roles","in":"header","description":"Comma-separated list of roles of the currently authenticated user. If provided will be used for authorisation.","required":false,"type":"string"},{"name":"documentId","in":"path","description":"documentId","required":true,"type":"string"},{"name":"versionId","in":"path","description":"versionId","required":true,"type":"string"}],"responses":{"200":{"description":"OK","schema":{"type":"object"}},"201":{"description":"Created"},"204":{"description":"JSON representation of a document version","schema":{"$ref":"#/definitions/DocumentContentVersionHalResource"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}}},"/documents/{documentId}/versions/{versionId}/thumbnail":{"get":{"tags":["document-thumbnail-controller"],"summary":"Streams a specific version of the content of a Stored Document.","operationId":"getDocumentContentVersionDocumentPreviewThumbnailUsingGET","consumes":["application/json"],"produces":["*/*"],"parameters":[{"name":"ServiceAuthorization","in":"header","description":"Service Auth (S2S). Use it when accessing the API on App Tier level.","required":true,"type":"string"},{"name":"user-id","in":"header","description":"User-id of the currently authenticated user. If provided will be used to populate the creator field of a document and will be used for authorisation.","required":false,"type":"string"},{"name":"user-roles","in":"header","description":"Comma-separated list of roles of the currently authenticated user. If provided will be used for authorisation.","required":false,"type":"string"},{"name":"documentId","in":"path","description":"documentId","required":true,"type":"string"},{"name":"versionId","in":"path","description":"versionId","required":true,"type":"string"}],"responses":{"200":{"description":"Returns contents of a document version","schema":{"$ref":"#/definitions/Resource"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}}}},"definitions":{"DocumentContentVersionHalResource":{"type":"object","properties":{"_embedded":{"type":"object","additionalProperties":{"$ref":"#/definitions/ResourceSupport"}},"createdBy":{"type":"string"},"createdOn":{"type":"string","format":"date-time"},"links":{"type":"array","items":{"$ref":"#/definitions/Link"}},"mimeType":{"type":"string"},"originalDocumentName":{"type":"string"},"size":{"type":"integer","format":"int64"}}},"File":{"type":"object","properties":{"absolute":{"type":"boolean"},"absoluteFile":{"$ref":"#/definitions/File"},"absolutePath":{"type":"string"},"canonicalFile":{"$ref":"#/definitions/File"},"canonicalPath":{"type":"string"},"directory":{"type":"boolean"},"file":{"type":"boolean"},"freeSpace":{"type":"integer","format":"int64"},"hidden":{"type":"boolean"},"name":{"type":"string"},"parent":{"type":"string"},"parentFile":{"$ref":"#/definitions/File"},"path":{"type":"string"},"totalSpace":{"type":"integer","format":"int64"},"usableSpace":{"type":"integer","format":"int64"}}},"InputStream":{"type":"object"},"Link":{"type":"object","properties":{"deprecation":{"type":"string"},"href":{"type":"string"},"hreflang":{"type":"string"},"media":{"type":"string"},"rel":{"type":"string"},"templated":{"type":"boolean"},"title":{"type":"string"},"type":{"type":"string"}}},"MetadataSearchCommand":{"type":"object","properties":{"name":{"type":"string"},"value":{"type":"string"}}},"Resource":{"type":"object","properties":{"description":{"type":"string"},"file":{"$ref":"#/definitions/File"},"filename":{"type":"string"},"inputStream":{"$ref":"#/definitions/InputStream"},"open":{"type":"boolean"},"readable":{"type":"boolean"},"uri":{"$ref":"#/definitions/URI"},"url":{"$ref":"#/definitions/URL"}}},"ResourceSupport":{"type":"object","properties":{"links":{"type":"array","items":{"$ref":"#/definitions/Link"}}}},"StoredDocumentAuditEntryHalResource":{"type":"object","properties":{"_embedded":{"type":"object","additionalProperties":{"$ref":"#/definitions/ResourceSupport"}},"action":{"type":"string","enum":["CREATED","READ","UPDATED","MIGRATED","DELETED","HARD_DELETED"]},"links":{"type":"array","items":{"$ref":"#/definitions/Link"}},"recordedDateTime":{"type":"string","format":"date-time"},"type":{"type":"string"},"username":{"type":"string"}}},"StoredDocumentHalResource":{"type":"object","properties":{"_embedded":{"type":"object","additionalProperties":{"$ref":"#/definitions/ResourceSupport"}},"classification":{"type":"string","enum":["PUBLIC","PRIVATE","RESTRICTED"]},"createdBy":{"type":"string"},"createdOn":{"type":"string","format":"date-time"},"lastModifiedBy":{"type":"string"},"links":{"type":"array","items":{"$ref":"#/definitions/Link"}},"metadata":{"type":"object","additionalProperties":{"type":"string"}},"mimeType":{"type":"string"},"modifiedOn":{"type":"string","format":"date-time"},"originalDocumentName":{"type":"string"},"roles":{"type":"array","items":{"type":"string"}},"size":{"type":"integer","format":"int64"},"ttl":{"type":"string","format":"date-time"}}},"StoredDocumentHalResourceCollection":{"type":"object","properties":{"content":{"type":"array","items":{"$ref":"#/definitions/StoredDocumentHalResource"}},"links":{"type":"array","items":{"$ref":"#/definitions/Link"}}}},"URI":{"type":"object","properties":{"absolute":{"type":"boolean"},"authority":{"type":"string"},"fragment":{"type":"string"},"host":{"type":"string"},"opaque":{"type":"boolean"},"path":{"type":"string"},"port":{"type":"integer","format":"int32"},"query":{"type":"string"},"rawAuthority":{"type":"string"},"rawFragment":{"type":"string"},"rawPath":{"type":"string"},"rawQuery":{"type":"string"},"rawSchemeSpecificPart":{"type":"string"},"rawUserInfo":{"type":"string"},"scheme":{"type":"string"},"schemeSpecificPart":{"type":"string"},"userInfo":{"type":"string"}}},"URL":{"type":"object","properties":{"authority":{"type":"string"},"content":{"type":"object"},"defaultPort":{"type":"integer","format":"int32"},"file":{"type":"string"},"host":{"type":"string"},"path":{"type":"string"},"port":{"type":"integer","format":"int32"},"protocol":{"type":"string"},"query":{"type":"string"},"ref":{"type":"string"},"userInfo":{"type":"string"}}},"UpdateDocumentCommand":{"type":"object","properties":{"ttl":{"type":"string","format":"date-time"}}}}}
