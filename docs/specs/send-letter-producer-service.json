{"swagger":"2.0","info":{"description":"Api Documentation","version":"1.0","title":"Api Documentation","termsOfService":"urn:tos","contact":{},"license":{"name":"Apache 2.0","url":"http://www.apache.org/licenses/LICENSE-2.0"}},"host":"localhost:8485","basePath":"/","tags":[{"name":"report-controller","description":"Report Controller"},{"name":"send-letter-controller","description":"Send Letter Controller"}],"paths":{"/letter-reports/print-status-check":{"post":{"tags":["report-controller"],"summary":"Execute action for print state","operationId":"checkPrintStateUsingPOST","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"ServiceAuthorization","in":"header","description":"ServiceAuthorization","required":false,"type":"string"}],"responses":{"200":{"description":"OK"}}}},"/letters":{"post":{"tags":["send-letter-controller"],"summary":"Send letter to print and post service","operationId":"sendLetterUsingPOST","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"ServiceAuthorization","in":"header","description":"ServiceAuthorization","required":false,"type":"string"},{"in":"body","name":"letter","description":"Letter consisting of documents and type","required":true,"schema":{"$ref":"#/definitions/Letter"}}],"responses":{"200":{"description":"Successfully sent letter","schema":{"$ref":"#/definitions/SendLetterResponse"}}}}},"/letters/{id}":{"get":{"tags":["send-letter-controller"],"summary":"Get letter status","operationId":"getLetterStatusUsingGET","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"id","in":"path","description":"id","required":true,"type":"string"},{"name":"ServiceAuthorization","in":"header","description":"ServiceAuthorization","required":false,"type":"string"}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/LetterStatus"}},"401":{"description":"Invalid service authorisation header"},"404":{"description":"Letter not found"}}}},"/letters/{id}/is-failed":{"put":{"tags":["send-letter-controller"],"summary":"Update failed status when letter was sent to dead letter queue","operationId":"updateFailedStatusUsingPUT","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"id","in":"path","description":"id","required":true,"type":"string"},{"name":"ServiceAuthorization","in":"header","description":"ServiceAuthorization","required":false,"type":"string"}],"responses":{"200":{"description":"OK"}}}},"/letters/{id}/printed-at":{"put":{"tags":["send-letter-controller"],"summary":"Update when letter was printed","operationId":"updatePrintedAtUsingPUT","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"id","in":"path","description":"id","required":true,"type":"string"},{"in":"body","name":"patch","description":"patch","required":true,"schema":{"$ref":"#/definitions/LetterPrintedAtPatch"}},{"name":"ServiceAuthorization","in":"header","description":"ServiceAuthorization","required":false,"type":"string"}],"responses":{"200":{"description":"OK"}}}},"/letters/{id}/sent-to-print-at":{"put":{"tags":["send-letter-controller"],"summary":"Update when letter was sent to print","operationId":"updateSentToPrintUsingPUT","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"id","in":"path","description":"id","required":true,"type":"string"},{"in":"body","name":"patch","description":"patch","required":true,"schema":{"$ref":"#/definitions/LetterSentToPrintAtPatch"}},{"name":"ServiceAuthorization","in":"header","description":"ServiceAuthorization","required":false,"type":"string"}],"responses":{"200":{"description":"OK"}}}}},"definitions":{"Document":{"type":"object","required":["template","values"],"properties":{"template":{"type":"string","description":"Template to be used to render PDF"},"values":{"type":"object","description":"Template values for the PDF"}}},"Letter":{"type":"object","required":["documents","type"],"properties":{"documents":{"type":"array","description":"List of documents to be printed. Maximum allowed is 10","items":{"$ref":"#/definitions/Document"}},"type":{"type":"string","description":"Type to be used by Xerox to print documents"},"additional_data":{"type":"object"}}},"LetterPrintedAtPatch":{"type":"object","properties":{"printedAt":{"type":"string","format":"date-time"},"printed_at":{"type":"string","format":"date-time"}}},"LetterSentToPrintAtPatch":{"type":"object","properties":{"sentToPrintAt":{"type":"string","format":"date-time"},"sent_to_print_at":{"type":"string","format":"date-time"}}},"LetterStatus":{"type":"object","properties":{"created_at":{"type":"string","format":"date-time"},"has_failed":{"type":"boolean"},"id":{"type":"string"},"message_id":{"type":"string"},"printed_at":{"type":"string","format":"date-time"},"sent_to_print_at":{"type":"string","format":"date-time"}}},"SendLetterResponse":{"type":"object","properties":{"letter_id":{"type":"string","description":"Id of the letter sent to print"}}}}}
